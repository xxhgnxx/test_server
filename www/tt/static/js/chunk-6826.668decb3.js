(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6826"],{JCNI:function(t,e,a){"use strict";a.d(e,"c",function(){return l}),a.d(e,"b",function(){return n}),a.d(e,"d",function(){return s}),a.d(e,"a",function(){return o}),a.d(e,"e",function(){return r});var i=a("t3Un");function l(t){return Object(i.a)({url:"/article/list",method:"get",params:t})}function n(t){return Object(i.a)({url:"/article/detail",method:"get",params:{id:t}})}function s(t){return Object(i.a)({url:"/article/pv",method:"get",params:{pv:t}})}function o(t){return Object(i.a)({url:"/article/create",method:"post",data:t})}function r(t){return Object(i.a)({url:"/article/update",method:"post",data:t})}},ZySA:function(t,e,a){"use strict";var i=a("P2sY"),l=a.n(i),n=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var i=l()({},e.value),n=l()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var o=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",s.appendChild(r)),n.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-o.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-o.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=n.color,r.className="waves-ripple z-active",!1}},!1)}}),s=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(s)),n.install=s;e.a=n},jUE0:function(t,e,a){},tSRy:function(t,e,a){"use strict";a.r(e);var i=a("FyfS"),l=a.n(i),n=a("P2sY"),s=a.n(n),o=a("ukHw"),r=a("t3Un");function c(t){return Object(r.a)({url:"/category/pid/"+t,method:"get"})}var u=a("ZySA"),p=a("7Qib"),d=a("JCNI"),m=[{key:"CN",display_name:"China"},{key:"US",display_name:"USA"},{key:"JP",display_name:"Japan"},{key:"EU",display_name:"Eurozone"}],f=m.reduce(function(t,e){return t[e.key]=e.display_name,t},{}),y={name:"Account",directives:{waves:u.a},filters:{statusFilter:function(t){return{published:"success",draft:"info",deleted:"danger"}[t]},typeFilter:function(t){return f[t]}},data:function(){return{tableKey:0,list:null,total:null,listLoading:!0,listQuery:{pageSize:1,page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id"},importanceOptions:[1,2,3],calendarTypeOptions:m,sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],temp:{feeTime:[0,0],contractTime:[0,0],companyName:"懂球帝",fee:.05,accountTypeName:"微信",gatewanAccount:"帐号",gatewayName:"网关名称",settlingBank:"工商银行",contractStart:1537520074,contractEnd:1537520074,feeStart:1537520074,feeEnd:1537520074,isApi:0,settlingBankNum:"1122334455"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],gatewanAccount:[{required:!0,message:"必填项不能为空",trigger:"blur"}]},downloadLoading:!1,accountType:[],company:[]}},created:function(){console.log("created"),this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(o.b)(this.listQuery).then(function(e){console.log("res123",e);var a=e.data;0===a.code&&(t.list=a.data.list.list,console.log(a.data.list))}),this.listLoading=!1},getCategoryList:function(){var t=this;c(1).then(function(e){console.log("id 1",e),e.data.data&&(t.accountType=e.data.data.list)}),c(2).then(function(e){console.log("id 2",e),e.data.data&&(t.company=e.data.data.list)})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"操作成功",type:"success"}),t.status=e},resetTemp:function(){this.temp={id:void 0,importance:1,remark:"",timestamp:new Date,title:"",status:"published",type:""}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.temp.contractStart=t.temp.contractTime[0],t.temp.contractEnd=t.temp.contractTime[1],t.temp.feeStart=t.temp.feeTime[0],t.temp.feeEnd=t.temp.feeTime[1],Object(o.a)(t.temp).then(function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.getList()}))})},handleUpdate:function(t){var e=this;this.temp=s()({},t),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=s()({},t.temp);a.timestamp=+new Date(a.timestamp),Object(d.e)(a).then(function(){var e=!0,a=!1,i=void 0;try{for(var n,s=l()(t.list);!(e=(n=s.next()).done);e=!0){var o=n.value;if(o.id===t.temp.id){var r=t.list.indexOf(o);t.list.splice(r,1,t.temp);break}}}catch(t){a=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw i}}t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})}})},handleDelete:function(t){this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var e=this.list.indexOf(t);this.list.splice(e,1)},handleFetchPv:function(t){var e=this;Object(d.d)(t).then(function(t){e.pvData=t.data.pvData,e.dialogPvVisible=!0})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-7a57"),a.e("chunk-3c5e"),a.e("chunk-7f56")]).then(a.bind(null,"S/jZ")).then(function(e){var a=t.formatJson(["timestamp","title","type","importance","status"],t.list);e.export_json_to_excel({header:["timestamp","title","type","importance","status"],data:a,filename:"table-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?Object(p.c)(e[t]):e[t]})})}}},v=a("KHd+"),g=Object(v.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{"padding-bottom":"0"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:t.$t("table.title"),size:"mini"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"90px"},attrs:{placeholder:t.$t("table.importance"),clearable:"",size:"mini"},model:{value:t.listQuery.importance,callback:function(e){t.$set(t.listQuery,"importance",e)},expression:"listQuery.importance"}},t._l(t.importanceOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:t.$t("table.type"),clearable:"",size:"mini"},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.calendarTypeOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name+"("+t.key+")",value:t.key}})})),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{size:"mini"},on:{change:t.handleFilter},model:{value:t.listQuery.sort,callback:function(e){t.$set(t.listQuery,"sort",e)},expression:"listQuery.sort"}},t._l(t.sortOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})})),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleFilter}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download",size:"mini"},on:{click:t.handleDownload}},[t._v(t._s(t.$t("table.export")))])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"id",align:"center",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"账号名称","max-width":"100px","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type",on:{click:function(a){t.handleUpdate(e.row)}}},[t._v(t._s(e.row.gatewayName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"账号",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.gatewayAccount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"账号类型",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.accountTypeName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"费率",align:"center",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fee?a("span",{staticClass:"link-type",on:{click:function(a){t.handleFetchPv(e.row.pageviews)}}},[t._v(t._s(e.row.pageviews))]):a("span",[t._v("0")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属公司","max-width":"100px","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.companyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算银行",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.settlingBank))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算银行账号",width:"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.settlingBankNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"账号合同期限",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.contractStart+" - "+e.row.contractEnd))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"费率生效时段",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.feeStart+" - "+e.row.feeEnd))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否有接口对接","class-name":"status-col",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"添加支付账号"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{"margin-right":"100px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号名称",prop:"gatewayName"}},[a("el-input",{model:{value:t.temp.gatewayName,callback:function(e){t.$set(t.temp,"gatewayName",e)},expression:"temp.gatewayName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号",prop:"gatewanAccount"}},[a("el-input",{model:{value:t.temp.gatewanAccount,callback:function(e){t.$set(t.temp,"gatewanAccount",e)},expression:"temp.gatewanAccount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号类型",prop:"accountTypeName"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"padding-left":"0"},attrs:{span:12}},[a("el-input",{model:{value:t.temp.accountTypeName,callback:function(e){t.$set(t.temp,"accountTypeName",e)},expression:"temp.accountTypeName"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"选择已有"},model:{value:t.temp.accountTypeName,callback:function(e){t.$set(t.temp,"accountTypeName",e)},expression:"temp.accountTypeName"}},t._l(t.calendarTypeOptions,function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}))],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"费率",prop:"fee"}},[a("el-input",{model:{value:t.temp.fee,callback:function(e){t.$set(t.temp,"fee",e)},expression:"temp.fee"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"费率生效时段",prop:"feeTime"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{"default-time":["12:00:00"],type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.temp.feeTime,callback:function(e){t.$set(t.temp,"feeTime",e)},expression:"temp.feeTime"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"所属公司",prop:"companyName"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"padding-left":"0"},attrs:{span:12}},[a("el-input",{model:{value:t.temp.companyName,callback:function(e){t.$set(t.temp,"companyName",e)},expression:"temp.companyName"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"选择已有"},model:{value:t.temp.companyName,callback:function(e){t.$set(t.temp,"companyName",e)},expression:"temp.companyName"}},t._l(t.company,function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}))],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"结算银行",prop:"settlingBank"}},[a("el-input",{model:{value:t.temp.settlingBank,callback:function(e){t.$set(t.temp,"settlingBank",e)},expression:"temp.settlingBank"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结算银行账号",prop:"settlingBankNum"}},[a("el-input",{model:{value:t.temp.settlingBankNum,callback:function(e){t.$set(t.temp,"settlingBankNum",e)},expression:"temp.settlingBankNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号合同期限",prop:"contractTime"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{"default-time":["12:00:00"],type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.temp.contractTime,callback:function(e){t.$set(t.temp,"contractTime",e)},expression:"temp.contractTime"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"是否有接口对接",prop:"isApi"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.temp.isApi,callback:function(e){t.$set(t.temp,"isApi",e)},expression:"temp.isApi"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:t.temp.isApi,callback:function(e){t.$set(t.temp,"isApi",e)},expression:"temp.isApi"}},[t._v("否")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogPvVisible,title:"Reading statistics"},on:{"update:visible":function(e){t.dialogPvVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pvData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"key",label:"Channel"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pv",label:"Pv"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogPvVisible=!1}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},[],!1,null,null,null);g.options.__file="account.vue";e.default=g.exports},ukHw:function(t,e,a){"use strict";a.d(e,"b",function(){return l}),a.d(e,"a",function(){return n});var i=a("t3Un");function l(t){return Object(i.a)({url:"/gateway/",method:"get"})}function n(t){return Object(i.a)({url:"/gateway/",method:"post",data:t})}}}]);